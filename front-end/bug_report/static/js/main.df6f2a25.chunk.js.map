{"version":3,"sources":["i18n.ts","FeedbackHandler.ts","AppContent.tsx","AppHeader.tsx","AppMainPage.tsx","AppThanksPage.tsx","App.tsx","index.tsx"],"names":["i18n","use","initReactI18next","LanguageDetector","init","resources","LangJson","fallbackLng","keySeparator","interpolation","escapeValue","protocol","window","location","uri","hostname","port","includes","isDevEnv","path","FeedbackHandler","feedback_id","job_queue_length","this","getFeedbackId","then","id","fetch","fetch_id_response","json","fetch_id_data","data","file","console","log","method","headers","screenshot_name","name","body","feedback","JSON","stringify","shared","AppContent","useState","submitName","setSubmitName","submitPhone","setSubmitPhone","submitEmail","setSubmitEmail","submitDescription","setSubmitDescription","hasChosenPhotos","setHasChosenPhotos","history","useHistory","uploadButtonRef","useRef","t","useTranslation","submitOnClick","e","a","preventDefault","uploadFeedback","feedback_email","feedback_name","feedback_description","feedback_phone","push","error","alert","resetHandler","className","style","display","type","accept","onChange","target","files","i","length","uploadFeedbackScreenshot","catch","multiple","ref","placeholder","value","onClick","current","click","color","fontWeight","AppHeader","AppMainPage","AppThanksPage","isUploading","setIsUploading","setInterval","marginTop","fontSize","App","document","title","i18next","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.df6f2a25.chunk.js","sourcesContent":["import i18n from 'i18next'\nimport LanguageDetector from 'i18next-browser-languagedetector'\nimport { initReactI18next } from 'react-i18next';\nimport LangJson from './lang.json'\n\ni18n.use(initReactI18next)\n    .use(LanguageDetector)\n    .init({\n        resources: LangJson.i18n,\n        fallbackLng: 'en',\n        keySeparator: false,\n        interpolation: {\n            escapeValue: false\n        }\n    })\n\nexport default i18n","import 'whatwg-fetch'\nimport { FeedbackInformation } from \"./Feedback\"\n// import Env from './env.json'\n\nconst isDevEnv = () => {\n    const uri = window.location.hostname\n    return uri === 'localhost' || uri === '127.0.0.1' || uri.includes('192.168')\n}\n\nconst protocol = window.location.protocol\nconst uri = window.location.hostname\nconst port = isDevEnv() ? 3001 : window.location.port\n\nconst path = `${protocol}//${uri}:${port}`\n\nclass FeedbackHandler {\n\n    feedback_id!: string\n\n    job_queue_length = 0\n\n    static shared = new FeedbackHandler()\n\n    constructor() {\n        this.getFeedbackId().then(id => {\n            this.feedback_id = id\n        })\n        // this.status = 'idle'\n    }\n\n    async resetHandler() {\n        this.job_queue_length = 0\n        this.feedback_id = await this.getFeedbackId()\n    }\n\n    async getFeedbackId() {\n        const fetch_id_response = await window.fetch(`${path}/feedback_id`)\n        const fetch_id_data = await fetch_id_response.json()\n        return fetch_id_data.data.feedback_id\n    }\n\n    async uploadFeedbackScreenshot(file: File) {\n        this.job_queue_length++\n        console.log(`job queue length: ${this.job_queue_length}`)\n        await window.fetch(`${path}/screenshot`, {\n            method: 'POST',\n            headers: {\n                feedback_id: this.feedback_id,\n                screenshot_name: file.name\n            },\n            body: file\n        })\n        this.job_queue_length--\n        console.log(`job queue length: ${this.job_queue_length}`)\n    }\n\n    async uploadFeedback(feedback: FeedbackInformation) {\n        this.job_queue_length++\n        console.log(`job queue length: ${this.job_queue_length}`)\n        await window.fetch(`${path}/feedback`, {\n            method: 'post',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                ...feedback,\n                feedback_id: this.feedback_id\n            } as FeedbackInformation)\n        })\n        this.job_queue_length--\n        console.log(`job queue length: ${this.job_queue_length}`)\n    }\n}\n\nexport default FeedbackHandler","import './AppContent.css'\nimport { useRef, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport React from 'react'\n// import { FeedbackInformation } from './Feedback'\nimport FeedbackHandler from './FeedbackHandler'\nimport { useTranslation } from 'react-i18next'\n\nfunction AppContent() {\n    const [submitName, setSubmitName] = useState('')\n    const [submitPhone, setSubmitPhone] = useState('')\n    const [submitEmail, setSubmitEmail] = useState('')\n    const [submitDescription, setSubmitDescription] = useState('')\n    const [hasChosenPhotos, setHasChosenPhotos] = useState(false)\n    const history = useHistory()\n    const uploadButtonRef = useRef(null)\n    const { t } = useTranslation()\n\n    const submitOnClick = async (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n        e.preventDefault()\n        try {\n            await FeedbackHandler.shared.uploadFeedback({\n                feedback_email: submitEmail,\n                feedback_name: submitName,\n                feedback_description: submitDescription,\n                feedback_phone: submitPhone\n            })\n            history.push('/thanks')\n        } catch (e) {\n            console.error(`Error when submitting feedback`)\n            console.error(e)\n            window.alert(t('error'))\n            FeedbackHandler.shared.resetHandler()\n        }\n    }\n\n    const onNameChanged = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setSubmitName(e.target.value)\n    }\n\n    const onEmailChanged = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setSubmitEmail(e.target.value)\n    }\n\n    const onPhoneChanged = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setSubmitPhone(e.target.value)\n    }\n\n    const onDescriptionChanged = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setSubmitDescription(e.target.value)\n    }\n\n    const onSelectFile = (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files) {\n            setHasChosenPhotos(true)\n            for (let i = 0; i < e.target.files.length; i++) {\n                FeedbackHandler.shared.uploadFeedbackScreenshot(e.target.files[i]).catch(e => {\n                    console.error(`Error when uploading screenshot.`)\n                    console.error(e)\n                })\n            }\n        }\n    }\n\n    return (\n        <div className=\"AppContent\">\n            <input style={{ display: 'none' }} type=\"file\" accept=\"image/*\" onChange={onSelectFile} multiple ref={uploadButtonRef} />\n            <div className=\"AppContentFormContainer\">\n                <form className=\"AppContentForm\">\n                    <div className=\"AppContentFormBugDescriptionField\">\n                        <label>{t('bug description')}</label>\n                        <textarea placeholder={t('describe your bug')} onChange={onDescriptionChanged} value={submitDescription} />\n                    </div>\n                    <div className=\"AppContentFormSelectFileField\">\n                        <label>{t('screenshots')}:</label>\n                        <span>{hasChosenPhotos ? t('selected') : ''}</span>\n                        <button onClick={e => {\n                            e.preventDefault();\n                            (uploadButtonRef as any).current.click()\n                        }}>\n                            {hasChosenPhotos ? t('reselect') : t('select photos')}\n                        </button>\n                    </div>\n                    <div style={{ color: 'gray', fontWeight: 500 }}>{t('contact info')}</div>\n                    <div className=\"AppContentFormTextField\">\n                        <label>{t('your name')}:</label>\n                        <input type=\"name\" onChange={onNameChanged} value={submitName} />\n                    </div>\n                    <div className=\"AppContentFormTextField\">\n                        <label>{t('email')}:</label>\n                        <input type=\"email\" onChange={onEmailChanged} value={submitEmail} />\n                    </div>\n                    <div className=\"AppContentFormTextField\">\n                        <label>{t('phone')}:</label>\n                        <input type=\"phone\" onChange={onPhoneChanged} value={submitPhone} />\n                    </div>\n                    <button className=\"AppContentFormSubmitButton\" onClick={submitOnClick}>{t('submit')}</button>\n                    <div className=\"AppContentBottomBarText\">\n                        {t('product name')}\n                    </div>\n                </form>\n            </div>\n        </div >\n    )\n}\n\nexport default AppContent","import React from 'react'\nimport { useTranslation } from 'react-i18next'\nimport './AppHeader.css'\n\nfunction AppHeader() {\n    const { t } = useTranslation()\n    return (\n        <div className=\"AppHeader\">\n            {t('report a bug')}\n        </div>\n    )\n}\n\nexport default AppHeader","import React from \"react\"\nimport AppContent from \"./AppContent\"\nimport AppHeader from \"./AppHeader\"\n\nfunction AppMainPage() {\n    return (\n        <div>\n            <AppHeader></AppHeader>\n            <AppContent></AppContent>\n        </div>\n    )\n}\n\nexport default AppMainPage","import React, { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport AppHeader from \"./AppHeader\";\nimport FeedbackHandler from \"./FeedbackHandler\";\n\nfunction AppThanksPage() {\n\n    const { t } = useTranslation()\n\n    const [isUploading, setIsUploading] = useState(FeedbackHandler.shared.job_queue_length === 0 ? false : true)\n    setInterval(() => {\n        if (FeedbackHandler.shared.job_queue_length === 0 && isUploading === true) {\n            setIsUploading(false)\n        }\n        if (FeedbackHandler.shared.job_queue_length >= 1 && isUploading === false) {\n            setIsUploading(true)\n        }\n    }, 200)\n\n    return (\n        <div>\n            <AppHeader></AppHeader>\n            <div style={{\n                marginTop: '240px',\n                fontSize: '28px'\n            }}>\n                {t('thank you')}<br />\n                <span style={{ fontSize: '16px', color: 'gray' }}>\n                    {isUploading ? t('submitting') : t('submitted')}\n                </span>\n            </div>\n        </div>\n    )\n}\n\nexport default AppThanksPage","// import logo from './logo.svg';\nimport React from 'react';\nimport './App.css';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route\n} from \"react-router-dom\";\nimport AppMainPage from './AppMainPage';\nimport AppThanksPage from './AppThanksPage';\n\nfunction App() {\n    return (\n        <Router>\n            <div className=\"App\">\n                <Switch>\n                    <Route path=\"/thanks\">\n                        <AppThanksPage></AppThanksPage>\n                    </Route>\n                    <Route path=\"/\">\n                        <AppMainPage></AppMainPage>\n                    </Route>\n                </Switch>\n            </div>\n        </Router>\n\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './i18n';\nimport App from './App';\nimport i18next from 'i18next'\n\ndocument.title = i18next.t('report a bug')\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}