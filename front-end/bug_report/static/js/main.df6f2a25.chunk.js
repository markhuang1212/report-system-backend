(this["webpackJsonptfc-report-a-bug"]=this["webpackJsonptfc-report-a-bug"]||[]).push([[0],{27:function(e){e.exports=JSON.parse('{"i18n":{"en":{"translation":{"report a bug":"Report A Bug","bug description":"Bug Description","select photos":"select photos","selected":"photos selected.","reselect":"reselect","screenshots":"Screenshots (optional)","your name":"Your Name","contact info":"Contact Information (optional)","email":"Email","phone":"Mobile Number","submit":"Submit","describe your bug":"Describe your bug here so that we can improve our product.","thank you":"Thanks for your feedback.","submitting":"Submitting... Please wait","submitted":"Submitted!","error":"An error occurred when submitting. Please check your connection.","product name":"","product name abbr":""}},"zh-CN":{"translation":{"report a bug":"\u63d0\u4ea4Bug","bug description":"Bug\u63cf\u8ff0","select photos":"\u9009\u62e9\u4e00\u5f20\u6216\u591a\u5f20\u7167\u7247","selected":"\u5df2\u9009\u62e9\u3002","reselect":"\u91cd\u65b0\u9009\u62e9","screenshots":"Bug\u622a\u56fe\uff08\u53ef\u9009\uff09","your name":"\u59d3\u540d/\u79f0\u547c","contact info":"\u8054\u7cfb\u65b9\u5f0f\uff08\u9009\u586b\uff09","email":"\u7535\u5b50\u90ae\u7bb1/Email","phone":"\u624b\u673a","submit":" \u63d0\u4ea4","describe your bug":"\u8bf7\u5c3d\u53ef\u80fd\u7ec6\u5f97\u63cf\u8ff0\u4f60\u9047\u5230\u7684Bug\u3002","thank you":"\u8c22\u8c22\u60a8\u7684\u53cd\u9988\u3002","submitting":"\u6b63\u5728\u63d0\u4ea4\uff0c\u8bf7\u7a0d\u540e","submitted":"\u63d0\u4ea4\u6210\u529f\uff01","error":"\u63d0\u4ea4\u65f6\u53d1\u9001\u9519\u8bef\u3002\u8bf7\u68c0\u67e5\u60a8\u7684\u7f51\u7edc\u8fde\u63a5\u3002","product name":"","product name abbr":""}},"zh-HK":{"translation":{"report a bug":"\u63d0\u4ea4Bug","bug description":"Bug\u63cf\u8ff0","select photos":"\u9078\u64c7\u4e00\u5f35\u6216\u591a\u5f35\u76f8\u7247","selected":"\u5df2\u9078\u64c7\u3002","reselect":"\u91cd\u65b0\u9078\u64c7","screenshots":"Bug\u622a\u5c4f\uff08\u53ef\u9078\uff09","your name":"\u59d3\u540d/\u7a31\u547c","contact info":"\u806f\u7e6b\u65b9\u5f0f\uff08\u9078\u586b\uff09","email":"\u96fb\u90f5/Email","phone":"\u624b\u6a5f\u865f\u78bc","submit":" \u63d0\u4ea4","describe your bug":"\u8acb\u76e1\u53ef\u80fd\u8a73\u60c5\u63cf\u8ff0\u4f60\u9047\u5230\u7684Bug\u3002","thank you":"\u591a\u8b1d\u4f60\u5605\u53cd\u994b\u3002","submitting":"\u6b63\u5728\u63d0\u4ea4\uff0c\u8acb\u7a0d\u5019","submitted":"\u63d0\u4ea4\u6210\u529f\uff01","error":"\u63d0\u4ea4\u6642\u767c\u751f\u932f\u8aa4\u3002\u8acb\u6aa2\u67e5\u4f60\u7684\u7db2\u8def\u9023\u7d50\u72c0\u614b\u3002","product name":"","product name abbr":""}},"zh-TW":{"translation":{"report a bug":"\u63d0\u4ea4Bug","bug description":"Bug\u63cf\u8ff0","select photos":"\u9078\u64c7\u4e00\u5f35\u6216\u591a\u5f35\u76f8\u7247","reselect":"\u91cd\u65b0\u9078\u64c7","selected":"\u5df2\u9078\u64c7\u3002","screenshots":"Bug\u622a\u5c4f\uff08\u53ef\u9078\uff09","your name":"\u59d3\u540d/\u7a31\u547c","contact info":"\u806f\u7e6b\u65b9\u5f0f\uff08\u9078\u586b\uff09","email":"\u96fb\u90f5/Email","phone":"\u624b\u6a5f\u865f\u78bc","submit":" \u63d0\u4ea4","describe your bug":"\u8acb\u76e1\u53ef\u80fd\u8a73\u60c5\u63cf\u8ff0\u4f60\u9047\u5230\u7684Bug\u3002","thank you":"\u591a\u8b1d\u4f60\u5605\u53cd\u994b\u3002","submitting":"\u6b63\u5728\u63d0\u4ea4\uff0c\u8acb\u7a0d\u5019","submitted":"\u63d0\u4ea4\u6210\u529f\uff01","error":"\u63d0\u4ea4\u6642\u767c\u751f\u932f\u8aa4\u3002\u8acb\u6aa2\u67e5\u4f60\u7684\u7db2\u8def\u9023\u7d50\u72c0\u614b\u3002","product name":"","product name abbr":""}}}}')},37:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),o=n(25),s=n.n(o),i=(n(37),n(14)),u=n(26),l=n(15),b=n(27);i.a.use(l.e).use(u.a).init({resources:b.i18n,fallbackLng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});i.a,n(38);var d=n(21),h=n(2),p=n(8),j=n.n(p),f=n(11),m=n(10),g=(n(40),n(22)),O=n(4),x=n(5),v=(n(41),window.location.protocol),k=window.location.hostname,y=function(){var e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e||e.includes("192.168")}()?3001:window.location.port,_="".concat(v,"//").concat(k,":").concat(y),w=function(){function e(){var t=this;Object(O.a)(this,e),this.feedback_id=void 0,this.job_queue_length=0,this.getFeedbackId().then((function(e){t.feedback_id=e}))}return Object(x.a)(e,[{key:"resetHandler",value:function(){var e=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.job_queue_length=0,e.next=3,this.getFeedbackId();case 3:this.feedback_id=e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFeedbackId",value:function(){var e=Object(f.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch("".concat(_,"/feedback_id"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.data.feedback_id);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadFeedbackScreenshot",value:function(){var e=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.job_queue_length++,console.log("job queue length: ".concat(this.job_queue_length)),e.next=4,window.fetch("".concat(_,"/screenshot"),{method:"POST",headers:{feedback_id:this.feedback_id,screenshot_name:t.name},body:t});case 4:this.job_queue_length--,console.log("job queue length: ".concat(this.job_queue_length));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadFeedback",value:function(){var e=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.job_queue_length++,console.log("job queue length: ".concat(this.job_queue_length)),e.next=4,window.fetch("".concat(_,"/feedback"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(g.a)(Object(g.a)({},t),{},{feedback_id:this.feedback_id}))});case 4:this.job_queue_length--,console.log("job queue length: ".concat(this.job_queue_length));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();w.shared=new w;var C=w,F=n(57);var S=function(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(""),s=Object(m.a)(o,2),i=s[0],u=s[1],l=Object(r.useState)(""),b=Object(m.a)(l,2),d=b[0],p=b[1],g=Object(r.useState)(""),O=Object(m.a)(g,2),x=O[0],v=O[1],k=Object(r.useState)(!1),y=Object(m.a)(k,2),_=y[0],w=y[1],S=Object(h.f)(),B=Object(r.useRef)(null),q=Object(F.a)().t,N=function(){var e=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,C.shared.uploadFeedback({feedback_email:d,feedback_name:n,feedback_description:x,feedback_phone:i});case 4:S.push("/thanks"),e.next=13;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error when submitting feedback"),console.error(e.t0),window.alert(q("error")),C.shared.resetHandler();case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"AppContent",children:[Object(c.jsx)("input",{style:{display:"none"},type:"file",accept:"image/*",onChange:function(e){if(e.target.files){w(!0);for(var t=0;t<e.target.files.length;t++)C.shared.uploadFeedbackScreenshot(e.target.files[t]).catch((function(e){console.error("Error when uploading screenshot."),console.error(e)}))}},multiple:!0,ref:B}),Object(c.jsx)("div",{className:"AppContentFormContainer",children:Object(c.jsxs)("form",{className:"AppContentForm",children:[Object(c.jsxs)("div",{className:"AppContentFormBugDescriptionField",children:[Object(c.jsx)("label",{children:q("bug description")}),Object(c.jsx)("textarea",{placeholder:q("describe your bug"),onChange:function(e){v(e.target.value)},value:x})]}),Object(c.jsxs)("div",{className:"AppContentFormSelectFileField",children:[Object(c.jsxs)("label",{children:[q("screenshots"),":"]}),Object(c.jsx)("span",{children:_?q("selected"):""}),Object(c.jsx)("button",{onClick:function(e){e.preventDefault(),B.current.click()},children:q(_?"reselect":"select photos")})]}),Object(c.jsx)("div",{style:{color:"gray",fontWeight:500},children:q("contact info")}),Object(c.jsxs)("div",{className:"AppContentFormTextField",children:[Object(c.jsxs)("label",{children:[q("your name"),":"]}),Object(c.jsx)("input",{type:"name",onChange:function(e){a(e.target.value)},value:n})]}),Object(c.jsxs)("div",{className:"AppContentFormTextField",children:[Object(c.jsxs)("label",{children:[q("email"),":"]}),Object(c.jsx)("input",{type:"email",onChange:function(e){p(e.target.value)},value:d})]}),Object(c.jsxs)("div",{className:"AppContentFormTextField",children:[Object(c.jsxs)("label",{children:[q("phone"),":"]}),Object(c.jsx)("input",{type:"phone",onChange:function(e){u(e.target.value)},value:i})]}),Object(c.jsx)("button",{className:"AppContentFormSubmitButton",onClick:N,children:q("submit")}),Object(c.jsx)("div",{className:"AppContentBottomBarText",children:q("product name")})]})})]})};n(55);var B=function(){var e=Object(F.a)().t;return Object(c.jsx)("div",{className:"AppHeader",children:e("report a bug")})};var q=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(B,{}),Object(c.jsx)(S,{})]})};var N=function(){var e=Object(F.a)().t,t=Object(r.useState)(0!==C.shared.job_queue_length),n=Object(m.a)(t,2),a=n[0],o=n[1];return setInterval((function(){0===C.shared.job_queue_length&&!0===a&&o(!1),C.shared.job_queue_length>=1&&!1===a&&o(!0)}),200),Object(c.jsxs)("div",{children:[Object(c.jsx)(B,{}),Object(c.jsxs)("div",{style:{marginTop:"240px",fontSize:"28px"},children:[e("thank you"),Object(c.jsx)("br",{}),Object(c.jsx)("span",{style:{fontSize:"16px",color:"gray"},children:e(a?"submitting":"submitted")})]})]})};var A=function(){return Object(c.jsx)(d.a,{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(h.c,{children:[Object(c.jsx)(h.a,{path:"/thanks",children:Object(c.jsx)(N,{})}),Object(c.jsx)(h.a,{path:"/",children:Object(c.jsx)(q,{})})]})})})};document.title=i.a.t("report a bug"),s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(A,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.df6f2a25.chunk.js.map